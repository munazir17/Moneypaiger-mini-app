<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoneyPaiger Mini App</title>

    <!-- ✅ Farcaster frame and miniapp metadata -->
    <meta property="fc:frame" content="vNext">
    <meta property="fc:miniapp:domain" content="moneypaiger-mini-app-eq8l.vercel.app">
    <meta property="fc:frame:image" content="https://moneypaiger-mini-app-eq8l.vercel.app/images/nft1.png">
    <meta property="og:title" content="MoneyPaiger Mini App">
    <meta property="og:description" content="Timeline of Digital Finance - Mint exclusive NFTs">

    <style>
        * {margin: 0; padding: 0; box-sizing: border-box;}
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }
        .container {max-width: 1200px; margin: 0 auto;}
        header {text-align: center; padding: 40px 0; border-bottom: 2px solid rgba(255,255,255,0.1); margin-bottom: 40px;}
        h1 {font-size: 3em; font-weight: 900; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px;}
        .tagline {font-size: 1.2em; color: #a0a0a0; margin-bottom: 20px;}
        .creator-info {font-size: 0.9em; color: #888; margin-top: 20px;}
        .creator-info a {color: #667eea; text-decoration: none; transition: color 0.3s;}
        .creator-info a:hover {color: #764ba2;}
        .nft-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 40px;}
        .nft-card {background: rgba(255,255,255,0.05); border-radius: 20px; overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s; border: 1px solid rgba(255,255,255,0.1);}
        .nft-card:hover {transform: translateY(-10px); box-shadow: 0 20px 40px rgba(102,126,234,0.3);}
        .nft-image {width: 100%; height: 300px; object-fit: cover; background: #000;}
        .nft-info {padding: 20px;}
        .nft-title {font-size: 1.5em; font-weight: 700; margin-bottom: 10px; color: #fff;}
        .nft-description {font-size: 0.95em; color: #a0a0a0; margin-bottom: 15px; line-height: 1.6;}
        .mint-price {font-size: 1.3em; font-weight: 700; color: #22c55e; margin-bottom: 15px; text-align: center;}
        .mint-button {width: 100%; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none; border-radius: 10px; color: white; font-size: 1.1em; font-weight: 700;
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;}
        .mint-button:hover {transform: scale(1.05); box-shadow: 0 10px 25px rgba(102,126,234,0.4);}
        .mint-button:active {transform: scale(0.98);}
        .status {margin-top: 10px; padding: 10px; border-radius: 8px; text-align: center; font-size: 0.9em; display: none;}
        .status.success {background: rgba(34,197,94,0.2); color: #22c55e; display: block;}
        .status.error {background: rgba(239,68,68,0.2); color: #ef4444; display: block;}
        footer {text-align: center; margin-top: 60px; padding: 30px 0; border-top: 2px solid rgba(255,255,255,0.1); color: #888;}
        .social-links {margin-top: 15px;}
        .social-links a {color: #667eea; text-decoration: none; margin: 0 10px; transition: color 0.3s;}
        .social-links a:hover {color: #764ba2;}
        @media (max-width: 768px) {h1 {font-size: 2em;} .nft-grid {grid-template-columns: 1fr;}}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MONEYPAIGER</h1>
            <p class="tagline">Timeline of Digital Finance - Since 2017</p>
            <p class="creator-info">
                Built by <a href="https://farcaster.xyz/munazir" target="_blank">@munazir</a> on Farcaster
            </p>
        </header>

        <main>
            <div class="nft-grid" id="nftGrid">
                <!-- Your NFT cards stay same -->
                <!-- ✅ No need to change — mint logic below handles interaction -->
            </div>
        </main>

        <footer>
            <p>MONEYPAIGER IS FOR EVERYONE</p>
            <p style="margin-top: 10px;">Built and designed by munazir</p>
            <div class="social-links">
                <a href="https://farcaster.xyz/munazir" target="_blank">Farcaster</a>
                <a href="https://twitter.com/Moneypaiger" target="_blank">Twitter</a>
                <a href="https://github.com/munazir17/Moneypaiger-mini-app" target="_blank">GitHub</a>
            </div>
        </footer>
    </div>

    <!-- ✅ Farcaster Mini App SDK Integration -->
    <script type="module">
      import { sdk } from "https://esm.sh/@farcaster/miniapp-sdk"

      async function initMiniApp() {
        try {
          await sdk.actions.ready()
          console.log("✅ Farcaster Mini App Ready")

          const provider = await sdk.wallet.ethProvider()
          const accounts = await provider.request({ method: "eth_requestAccounts" })
          const userAddress = accounts[0]
          console.log("Connected wallet:", userAddress)

          window.mintNFT = async function (nftId) {
            const button = event.target
            const statusEl = document.getElementById(`status-${nftId}`)
            button.disabled = true
            button.textContent = 'Minting...'
            statusEl.className = 'status'

            try {
              const txData = {
                from: userAddress,
                to: userAddress,
                value: '0x0',
                data: '0x' // Replace with real contract call later
              }
              const txHash = await provider.request({
                method: 'eth_sendTransaction',
                params: [txData]
              })
              statusEl.className = 'status success'
              statusEl.textContent = `✅ NFT Minted! TX: ${txHash}`
              button.textContent = 'Minted!'
            } catch (err) {
              statusEl.className = 'status error'
              statusEl.textContent = '❌ Mint failed: ' + err.message
              button.textContent = 'Mint NFT'
              button.disabled = false
            }
          }
        } catch (err) {
          console.warn("Not inside Farcaster or SDK error:", err)
        }
      }

      if (document.readyState === "complete" || document.readyState === "interactive") {
        initMiniApp()
      } else {
        document.addEventListener("DOMContentLoaded", initMiniApp)
      }
    </script>
</body>
</html>
